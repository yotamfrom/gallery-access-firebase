Gallery View Plugin

Project Overview

Sigalit Landau Studio maintains all artwork information in a relational FileMaker Cloud database, which serves as the central system of record for artworks, editions, ownership data, and internal inventory management.
In addition to the internal database, the studio operates a WordPress website, which already includes a custom plugin that connects to FileMaker Cloud through the FileMaker Data API.This existing plugin handles authentication, token generation, and initial data retrieval from FileMaker, and will be expanded and extended during this project.It provides the technical foundation for the new system and significantly reduces development time.
Currently, clients receive a unique link and password generated by the studio.This private access page allows them to view the specific artwork they purchased and verify their ownership in the studio’s records.The new system will build on this concept and evolve it into a fully featured platform for browsing, searching, collecting, and sharing artworks.
The aim of this project is to create a secure, responsive, gallery-facing interface, integrated with FileMaker Cloud, that allows authorized galleries to:
Log in using credentials assigned by the studio
View artworks available for sale
Search artworks using multiple fields and filters
Open full artwork details and images
Create and manage custom artwork collections
Mark works temporarily using a Quick Collection
Place HOLDs on artworks for up to 30 days
Export curated selections to PDF
Share selections through time-limited guest view links
Maintain all artwork and collection data within FileMaker as the authoritative database
This specification defines all system requirements, workflows, data structures, and technical integrations necessary for design and development.


 System Goals


The Gallery Access System is designed to provide authorized gallery partners with a streamlined, secure, and intuitive interface for viewing and managing selected artworks from the Sigalit Landau Studio archive.
All data originates and remains fully managed in FileMaker Cloud, ensuring accuracy, consistency, and centralized control.
The primary goals of the system are:

2.1 Provide Secure Access to Artwork Information
Offer studio-approved galleries password-protected access to selected artworks.
Prevent any public access or user self-registration.
Maintain full administrative control over permissions and data visibility.

2.2 Enable Browsing and Searching of Artworks
Allow galleries to browse artworks available for sale.
Support structured, field-specific searches using individual inputs:
Title, Year or Year Range, Category, Series, Materials, Dimensions, and optional Price Range. Each search field applies only to its corresponding FileMaker field. No global free-text search is used.
Present artworks in a clean, responsive grid with key metadata.
2.3 Display Artwork Details and Gallery-Specific Information
Display the artwork caption (combined title, year, materials, and dimensions) exactly as stored in FileMaker. Additional fields such as Category, Series, Inventory Number, and Current Edition Price may be displayed separately.
Present Work Text associated with the artwork (description, curatorial text, or artwork statement), as stored in FileMaker.
Provide a clean, gallery-grade viewing interface suitable for client presentations.
Display availability indicators based on edition status (Available / On Hold / Not Available).
Show artworks currently on loan to the gallery, using edition and location information stored in FileMaker.
Maintain consistent formatting and hierarchy across all artwork detail screens.

2.4 Support Collection Creation and Management
Allow galleries to create curated selections of artworks (Collections).
Add artworks to existing collections or create new ones.
Reorder and manage collection items through an intuitive interface.

2.5 Quick Collection for Temporary Selections
Use a checkbox to toggle artworks into or out of the Quick Collection. Selected items must be visually highlighted in the grid (e.g., border change, background tint, or selection icon).
Convert the Quick Collection into a formal saved collection.

2.6 HOLD Mechanism
Allow galleries to place a 30-day temporary hold on artworks.
Display HOLD status clearly to all users.
Automatically release holds after their expiration date.

2.7 Export Tools
Enable galleries to export collections as branded PDF documents.
Enable individual artwork image downloads.
Enable multi-image download, both for multi-image artworks and multiple items within a collection.
Ensure all exported materials maintain studio branding and visual consistency.

2.8 Sharing With Collectors
Provide Guest View links with a 7-day expiration.
Restrict downloads and enforce soft protection (e.g., overlay) in guest mode.
Present artworks in a clean, distraction-free layout for client presentations.

2.9 Preserve FileMaker as the Central Database
Store all artworks, editions, gallery records, collections, and holds in FileMaker.
Use WordPress solely as an access and presentation interface.
Synchronize all read/write actions through the FileMaker Data API.

User Types & Permissions (Final Corrected Version)


The system defines three user types: Studio Administrators, Gallery Personnel, and Guest View Users.
All user identity, authentication, and access control are managed exclusively inside FileMaker.
WordPress serves only as the interface that validates credentials against FileMaker and displays the data.

3.1 Studio Administrators
Role Description
Internal studio staff responsible for creating gallery access accounts, managing artworks, editions, holds, and all related data inside FileMaker.

Permissions
Studio Administrators can:
Create, edit, and delete gallery access accounts directly in FileMaker
Define the single User ID for each gallery (one account per gallery)
Manage all gallery metadata (name, contact person, email, phone, notes)
Fully manage artworks, images, editions, and availability
Oversee and modify holds
View and edit any collection created by any gallery
Upload and update artwork images and work texts
Send or manage guest view links
Maintain all database logic within FileMaker

System Presence
Administrators work solely inside FileMaker
WordPress is used only for configuration and as the web interface
Login validation is always done against FileMaker-stored credentials

3.2 Gallery Personnel
Role Description
Authorized personnel of a gallery.
Each gallery receives one User ID and password, created in FileMaker, which all relevant gallery staff use collectively.

Permissions
Gallery Personnel can:
Log in via WordPress using credentials stored in FileMaker
Browse artworks available for sale
View complete artwork details, including images and work text
Perform advanced searches and filtering
Build Quick Collections
Create, edit, and manage curated collections stored in FileMaker
Download single or multiple images
Export collections to PDF
Place and release 30-day holds
View artworks currently on loan to their gallery
Generate time-limited (7-day) guest view links for collectors

Restrictions
Gallery Personnel cannot:
Create, modify, or delete user accounts
Access other galleries’ collections or data
Change artwork metadata
Access FileMaker directly
Modify hold logic or expiration settings
Access any restricted artworks not marked for sale or display

3.3 Guest View Users
Role Description
External collectors or partners accessing a shared collection through a secure, temporary link generated by a gallery.
Permissions
Guest users can:
View artwork images and captions in a presentation-focused layout
Navigate through the shared selection

Restrictions
Guest users cannot:
Log in
Access search, collections, or other galleries
Download images or save them (soft blocking plus restricted download)
Access expired links
Modify any data

Database Structure (High-Level)


All artwork information and gallery-related data is stored and managed in a relational FileMaker Cloud database.
The system uses existing tables (works_catalog, edition_catalog, etc.) and includes new tables created specifically to support gallery access, collections, holds, and presentation features.

4.1 Existing Tables Used in the System
4.1.1 works_catalog
Primary table for all gallery-facing search, listing, and artwork detail operations.
Backend mandatory filter applied to all queries: Available for sale = "yes"

This field is never shown in the UI and never returned to the API.
It is only used internally to determine which artworks the gallery may access.
The system displays the caption field from works_catalog as the complete descriptive line (title, year, materials, dimensions). Underlying fields such as work_name, creation_year, materials_for caption, and dimensions_* are used for filtering only, not for display.

4.1.2 edition_catalog
Used only for identifying artworks currently on loan to the gallery.
Relevant fields:
edition_id
work_id_fk
Status
Loaned_to / Location
No other edition data is used by the gallery interface.
Returned artworks must still satisfy: Available for sale = "yes"

4.2 New Tables Created for the Gallery Access System
4.2.1 Galleries
Stores login credentials and identity for each gallery.
Each gallery has exactly one account.

Fields:
gallery_id
GalleryName
ContactPerson
Email
Phone
Username
Password
Notes
CreatedAt
ModifiedAt

4.2.2 Gallery_Collections
Represents curated selections created by a gallery.
Fields:
collection_id
gallery_id_fk
CollectionName
Description
IsActive
CreatedAt
ModifiedAt

4.2.3 Gallery_Collection_Items
Join table linking artworks to collections.
Fields:
collection_item_id
collection_id_fk
work_id_fk
SortOrder
ItemNotes
CreatedAt
ModifiedAt

4.3 Relationships (High-Level)
works_catalog 1 → many edition_catalog
Galleries 1 → many Gallery_Collections
Gallery_Collections 1 → many Gallery_Collection_Items
Gallery_Collection_Items many → 1 works_catalog
(Optional future): HOLD table linking Galleries ↔ works_catalog

4.4 API-Relevant Field Set
All API search and listing operations apply this mandatory backend rule: Available for sale = "yes"
The field is not visible to the gallery and never appears in responses.

Fields exposed from works_catalog:
work_name
creation_year
work_category
Work Series
materials_for caption
dimensions_work_h
dimensions_work_w
dimensions_work_L
current edition price
(plus images, work text, inventory number, and any required display metadata)

Fields used from edition_catalog (loan view only):
work_id_fk
Status
Loaned_to 
4.5 Image Storage & Naming Convention
Physical Storage
All artwork images are stored on the WordPress server (e.g. /wp-content/uploads/...).
FileMaker does not store binary images for the gallery interface.
Reference in FileMaker
In works_catalog, only the first image of each artwork is stored.
Field name: image_location (Text).
Example value:2015_Dead Sea Bride.jpg
Naming Convention
All images for a given artwork share the same base name pattern:YEAR_Work Name
File extension is .jpg / .JPG (case-insensitive).
Additional images are stored in the same WordPress folder and have filenames that start with the same base.
Examples for a work called Salt Bride from 2015:
2015_Salt Bride.jpg (primary image)
2015_Salt Bride_2.jpg
2015_Salt Bride_detail.jpg
2015_Salt Bride_installation.jpg
The exact suffix (_2, _detail, etc.) is not stored in FileMaker – only the first filename is.
Plugin Logic to Resolve All ImagesWhen loading images for an artwork:
Read image_location from works_catalog, e.g.:2015_Salt Bride.jpg
Derive the base name by stripping the extension:2015_Salt Bride
Look in the configured image directory (e.g. /wp-content/uploads/artworks/) for all files whose filename starts with this base (case-insensitive), for example:
2015_Salt Bride.jpg
2015_Salt Bride_2.jpg
2015_Salt Bride_detail.jpg
Sort the matches in a stable order (e.g. alphabetical).
The first file in the sorted list is the main image.
All other files are additional images for the gallery strip / multi-download / guest view.
Construct full URLs for each file and return them to the front end as an array, e.g.:"images": [
  "https://example.com/wp-content/uploads/artworks/2015_Salt Bride.jpg",
  "https://example.com/wp-content/uploads/artworks/2015_Salt Bride_2.jpg",
  "https://example.com/wp-content/uploads/artworks/2015_Salt Bride_detail.jpg"
]

Single-Image Artworks
If only the primary image exists (only YEAR_Work Name.jpg in the folder):
The plugin will find only one file.
The UI will show just one image and hide any “additional images” strip.
Usage in Screens
Search Grid: uses only the first image URL as thumbnail.
Artwork Detail View:
Main viewer shows the first image.
Additional images strip shows the rest.
Downloads:
“Download image” → first image only.
“Download all images” → all files found via base pattern.
PDF Export & Guest View:
Use the image URLs resolved from this base-name logic.

Application Flow (User Journey Overview)


The Application Flow describes the complete journey of a Gallery Personnel user, from login to discovering artworks, viewing details, creating collections, placing holds, exporting assets, and sharing selections.
All database interactions occur through the WordPress plugin, which communicates with FileMaker Cloud.

The gallery experience consists of seven main stages:
Login & Authentication
Search & Discovery
Artwork Detail View
Quick Collection
Saved Collections
Hold System
Exports & Sharing

5.1 Login & Authentication

The user navigates to the secure login page.
The user enters Username and Password.
Credentials are stored in FileMaker (Galleries table).
WordPress sends the credentials to the FileMaker Data API for validation.
If the credentials are valid:
A session is created for the user
The associated gallery_id is loaded
The user is redirected to the Search & Discovery screen
If the credentials are invalid:
An error message is displayed: “Incorrect username or password.”
No registration or password recovery functionality is provided.
One login per gallery; shared by the gallery personnel.

5.2 Search & Discovery Flow

After login, the user arrives on the Artwork Search / Browse screen.
On initial load, before any search or filters are applied, the system automatically retrieves:
25 randomly selected artworks
Filtered from works_catalog
Where the mandatory backend rule applies:”Available for sale = "yes
The user may refine the results through:
Title
Category filters (work_category)
Series filters (Work Series)
Year or year-range filters (creation_year)
Dimension range filters (dimensions_work_h, _w, _L)
Price range (optional)
Logical queries: AND, AND NOT
Special filter: Works on loan to my gallery
Uses lookup from edition_catalog
Still returns only works where Available for sale = "yes"

Search results update dynamically (AJAX).
Each artwork card displays:
Thumbnail image
Work name
Caption (year, materials, dimensions)
Category
Button: Add to Quick Collection
Click/tap → opens the Artwork Detail View

5.3 Artwork Detail View

When the user selects an artwork:
The system loads all fields needed from works_catalog, including:
Display the caption field as the primary descriptive information. Additional metadata displayed includes Category, Series, Inventory Number, Edition Price (optional), and Loan Status.
Additional information from edition_catalog is loaded only when needed, specifically:
Whether the artwork (edition) is currently on loan to this gallery.
On this screen, the user may:
Add the artwork to a Saved Collection
Toggle Quick Collection checkbox
Place or remove a 30-day Hold
Download one or multiple images
Export the artwork to PDF (single-work PDF)
Return to Search results
5.4 Quick Collection Flow

Quick Collection is a temporary, session-based tool for fast selection.
Any artwork can be marked “Add to Quick Collection” from either Search results or Artwork Detail.
Quick Collection stores artwork IDs locally in the browser session (not in FileMaker).
Opening the Quick Collection shows:
All selected artworks
Options to remove items
Two main actions:
Create a new Collection
Add all items to an existing Collection
After use, the Quick Collection is:
Cleared manually by the user, or
Automatically cleared on logout or session expiration.

5.5 Saved Collections Flow

Saved Collections are persistently stored in FileMaker.
User opens My Collections.
Plugin loads all collections where gallery_id_fk matches the current user’s gallery.
Selecting a collection displays:
All artworks in it
Items in SortOrder
Ability to open each artwork in detail view
Ability to reorder artworks (drag-and-drop)
Ability to remove artworks
Ability to rename the collection
Additional actions available from the collection page:
PDF export (multi-artwork PDF)
Multi-image download (all artwork images in the collection)
Generate Guest View link
5.6 Hold System Flow

The Hold feature lets galleries temporarily reserve artworks.
On the Artwork Detail View, if eligible, a button shows: “Place Hold (30 days)”.
When pressed:
Plugin sends the hold request to FileMaker
FileMaker logs:
Gallery ID
Work ID
Hold start timestamp
Hold expiration timestamp
After placement:
Artwork becomes On Hold for all galleries
When expired:
Hold is automatically released by:
WordPress cron job or
FileMaker Server script
Galleries may remove their own active holds if permitted.

5.7 Exports & Sharing Flow

Exports
Available from the Artwork Detail View or Collection View:
Single-image download
Multi-image download
All images belonging to the artwork or the entire collection
PDF export
Contains one or multiple artworks
Studio-branded layout
High-quality and consistent formatting

Guest View Sharing
The user selects a collection and presses “Share Collection”.
Plugin generates a secure share link with:
Unique token
Encrypted hash
7-day expiration timestamp
The share link is stored in FileMaker or WordPress (per implementation).
Guest user opens the link:
No login required
Can view images and artwork captions
Cannot download images
Cannot take screenshots (soft overlay + JS deterrents)
Cannot access search or other collections
After expiration, the link becomes invalid.

Screen Specifications

6.1 Login Screen
Purpose
Allows authorized Gallery Personnel to log in using credentials stored in FileMaker (Galleries table).
No registration or password recovery is available.
Layout Structure
1. Header
Studio logo OR
Minimal text: “Sigalit Landau Studio – Gallery Access”
2. Background (Optional)
Random artwork image (blurred / low opacity)
Decorative only
3. Login Form
Form Fields
Username
Password
Buttons
Log In
Validates credentials against FileMaker
Success → redirect to Search screen
Failure → show error + increment failed attempts
Links
Back to sigalitlandau.com (opens in new tab)

4. Error Handling
If credentials are incorrect:
Display: “Incorrect username or password.”

5. Login Attempt Limit & Lockout Policy
To protect against brute-force attempts:
Allowed Attempts
Maximum of 5 failed login attempts per user session.
Lockout Behavior
After 5 failed attempts:
Login is temporarily disabled for that user’s IP + browser session.
Show message:“Too many login attempts. Please try again in 15 minutes.”

Lockout Duration
Default: 15 minutes
Configurable inside the plugin settings.
Tracking
The system tracks failed attempts via:
Session variables, and
A lightweight server-side log (FileMaker field or WP transient)
Reset Conditions
Successful login resets attempts to 0
Lockout automatically resets after the cooldown period

6. Technical Behavior
Authentication Flow
User submits { username, password }
Plugin checks if:
Lockout is active → block immediately
If allowed:
Send credentials to FileMaker
On valid credentials:
Receive gallery_id
Start authenticated WP session
Redirect to Search screen
On invalid credentials:
Increment failed-attempt counter
Display error
If attempts reach 5 → activate lockout

Security
HTTPS only
No credential caching
Automatic session timeout (recommended 12 hours)

6.2 Search & Discovery Screen
6.2.1 Initial Load Behavior
On entering the Search screen:
System retrieves 25 randomly selected artworks
Each artwork includes:
Thumbnail image
Caption (Work name + year + materials + dimensions)
Category
Series (optional)
Additional metadata as needed for filters
No manual formatting is required — all descriptive information is already included in:
caption

6.2.2 Search Bar
The search form includes separate fields for: Title, Year, Category, Series, Materials, Dimensions, and optional Price Range. Each field applies to its corresponding FileMaker field. No general free-text search is used.

Displayed Search Result Text
Always display the caption in the result card
No need to decompose name + year + materials + dimensions

6.2.3 Filters Panel
Filters are still based on underlying fields, but displayed results rely on the caption.
Filters include:
Work Category (work_category)
Work Series (Work Series)
Year (creation_year)
Dimensions (H/W/L)
Optional: edition price
Search results continue to display only:
Thumbnail
Caption
Category
Quick Collection checkbox (with visual highlight when selected)
6.2.4 Results Grid
Each artwork card contains:
Thumbnail image
Caption (complete descriptive text from FileMaker)
Category (optional small tag)
Add to Quick Collection button
Click → opens Artwork Detail View
No separate name/year/materials/dimensions elements.Caption handles all of it.

6.2.5 Loaned to My Gallery
When filtering by loan status:
System checks edition_catalog
Returned results must still satisfy Available for sale = "yes"
Displayed results still use:
caption

6.2.6 No Results
"No artworks matched your search criteria."The caption is not recomputed — it’s pulled directly.

6.3 Artwork Detail View 
Purpose
The Artwork Detail View presents complete information for a single artwork and enables the gallery user to perform all relevant actions: adding to collections, downloading images, placing holds, and exporting.This screen uses data from works_catalog, limited data from edition_catalog, and images retrieved from the WordPress filesystem.

6.3.1 Layout Structure
The screen consists of:
Top Navigation Bar
Main Image Viewer
Artwork Metadata Panel
Actions Panel
Additional Images Strip
Work Text Section
Back Navigation

6.3.2 Top Navigation Bar
Consistent with other screens:
Studio Logo / Name
Navigation tabs:
Search
My Collections
Loaned to My Gallery
Quick Collection icon (with item count)
User Menu (Gallery name, Logout)

6.3.3 Main Image Viewer (Updated with WordPress Image Logic)
Image Source
Artwork images are not stored in FileMaker.Instead:
FileMaker stores only the first image filename in image_location
Example: 2015_Salt Bride.jpg
All images are stored in the WordPress filesystem, in a predefined directory
Example: /wp-content/uploads/artworks/
Image Resolution Logic
Plugin reads image_location from works_catalog.
Extracts the base name by removing file extension:
2015_Salt Bride
Scans the artwork image directory for all files that begin with this base, e.g.:
2015_Salt Bride.jpg
2015_Salt Bride_2.jpg
2015_Salt Bride_detail.jpg
Sorts filenames alphabetically.
The first item is the main image.
Viewer Features
Large responsive display
Click/tap to enter fullscreen mode
Zoom-in capability
Swipe or arrow navigation for multiple images
Smooth preloading of next/previous image

6.3.4 Artwork Metadata Panel
Loaded entirely from works_catalog: Display the caption field exactly as stored in FileMaker (combined title, year, materials, dimensions). Display Category, Series, Inventory Number, and Edition Price separately if required.
Loan Indicator
Loaded from edition_catalog (only for this feature):
If the artwork is currently on loan to the gallery:
Display a highlighted tag:“On loan to your gallery”

6.3.5 Actions Panel
A persistent side panel (desktop) or collapsible drawer (mobile).
Available Actions
1. Add to Quick Collection
Immediate action
Displays small confirmation message
2. Add to Saved Collection
Opens a modal with:
List of the gallery’s collections
Button: Create New Collection
3. Place Hold (30 Days)
Visible only if the artwork is eligible
If pressed:
Plugin sends request to FileMaker
FileMaker stores hold start and expiration date
UI updates to:“On hold until [DATE]”
4. Release Hold
Shown only if:
The artwork is currently on hold by this gallery
Pressing it removes the hold in FileMaker
5. Download Image
Downloads the main image only
Direct download from WordPress filesystem
6. Download All Images
Downloads a ZIP containing:
All images resolved via the base-name match
Pulled from the WordPress filesystem
7. Export PDF
Generates a single-artwork PDF
Uses image files retrieved from WP filesystem
Applies studio-branded layout

6.3.6 Additional Images Strip
If multiple images exist for this artwork:
A horizontal thumbnail strip is shown beneath the main viewer
Clicking thumbnails updates the main viewer
Supports drag-scroll (desktop) and swipe (mobile)
If only the primary image exists, the strip is hidden.

6.3.7 Work Text Section
Displays full work_text from works_catalog
Supports multiple paragraphs
Optional “Show more / Show less” collapse for long texts
Clean typography with no formatting injection

6.3.8 Back Navigation
A simple link/button:
“Back to Results”
Returns user to the Search screen
Restores previous scroll position and current search filters

6.3.9 Edge Cases
If main image file is missing
Show fallback placeholder
Still display metadata and actions
If no additional images exist
Hide the gallery strip entirely
If hold cannot be placed
Hide the “Place Hold” button
Optional explanation tooltip:“This artwork cannot be placed on hold.”
If filename contains forbidden characters
Plugin normalizes/escapes characters before file lookup

6.4 Quick Collection
Purpose
Quick Collection is a temporary, session-based selection tool that allows gallery personnel to mark artworks while browsing and later add them to a permanent Collection.It is not stored in FileMaker — only in the browser session.

6.4.1 Selection Mechanism
Checkbox Control
Each artwork card (in Search Grid and Artwork Detail View) includes a Quick Collection checkbox.
Checked → artwork is in Quick Collection
Unchecked → artwork removed
Changes update in real time
Checkbox stays synced between Grid and Detail View

6.4.2 Visual Highlight in Grid
When a checkbox is checked, the artwork card visually changes:
Highlighted border or
Light background tint or
“Selected” badge
Users must easily recognize selected items at a glance.

6.4.3 Quick Collection Indicator
A persistent UI element in the top navigation showing:
Icon
Counter (e.g., Quick Collection (7))
Clicking opens the Quick Collection panel.

6.4.4 Quick Collection Panel / Screen
Displayed Items
Each artwork appears with:
Thumbnail from /artworks/small/
Caption
Optional: Category / Series
Checkbox to remove
Actions
A. Create New Collection
Opens modal:
Collection Name
Optional Description
Creates record in Gallery_Collections
Adds all items to Gallery_Collection_Items
B. Add to Existing Collection
List of gallery’s collections
Adds selected artworks (no duplicates)
C. Clear Quick Collection
Removes all items
Unchecks all checkboxes

6.4.5 Storage
Stored only in:
localStorage or sessionStorage
Clears on logout, expiration, or manual clear.

6.4.6 Behavior Across Searches
Selected artworks remain selected in all views
If artwork appears again → checkbox stays checked
If not visible → still in Quick Collection panel

6.4.7 Error Handling
If localStorage fails:
Non-blocking notice:“Could not save selection. Please re-select artworks.”
If artwork becomes unavailable:
Auto-removed from Quick Collection

6.5 Saved Collections
Purpose
Saved Collections are curated sets of artworks stored in FileMaker and used for exporting, sharing, and internal gallery workflows.

6.5.1 Layout Structure
A. Collection List Panel (Left)
Shows all collections belonging to the gallery:
Name
Artwork count
Date created
Highlight selected collection
B. Selected Collection View (Right)
Grid/list of artworks including:
Thumbnail (from /artworks/small/)
Caption
Edition Number
Edition Price
Remove icon
Drag handle (reordering)
Order is based on SortOrder in Gallery_Collection_Items.

6.5.2 Collection Actions
Rename Collection
Updates FileMaker.
Delete Collection (optional)
Removes collection + items.
Add From Quick Collection
Adds all selected artworks (no duplicates).
Export Collection
A. PDF Export
One page per artwork containing:
Main image (full size)
Caption
Category / Series
Inventory number
Edition Number
Edition Price
B. Download All Images (ZIP)
One folder per artwork
Inside each folder → all full-resolution images
C. Share Collection (Guest View)
Generates 7-day tokenized link.

6.5.3 Create New Collection
User enters:
Name
Optional description
Then new collection opens empty.

6.5.4 Empty Collection State
If empty:
“This collection is empty. Use Quick Collection to add artworks.”
Button: Add from Quick Collection

6.5.5 Error Handling
If artwork missing → placeholder.If export fails → “Export failed — try again.”For large collections → display spinner / progress.

6.6 Hold System
Purpose
Holds allow galleries to temporarily reserve an artwork for 30 days.
On Hold (Expired) — Auto-revert to Place Hold

6.6.1 Where Holds Appear
Only in Artwork Detail View.
States:
Place Hold (30 days)
On Hold by This Gallery — Release Hold
On Hold by Another Gallery
Hold Not Available (optional)


6.6.2 Hold Placement Flow
User clicks Place Hold
WP sends FM:
gallery_id
work_id
HoldStart, HoldEnd
UI updates instantly
Hold displayed with expiration date

6.6.3 Hold Release
If gallery placed the hold:
Button: Release Hold
FM sets Active = 0

6.6.4 Hold Expiration
Automatic expiration by either:
FM server script (recommended), or
WP cron job
After expiration → returns to Place Hold state.

6.6.5 Visual Requirements
Hold status must be prominent, under caption using color-coded tags:
Yellow: On Hold
Blue: Your Hold
Gray: Not available

6.6.6 Interactions with Other Modules
Quick Collection unaffected
Collections unaffected
Holds not shown in Guest View

6.7 Exports & Downloads
Purpose
Enable galleries to export artwork / collection materials in various formats.

6.7.1 Export Types
A. Single Image Download
Downloads full-resolution main image
Source: /artworks/filename.jpg

B. Multi-Image Download (Artwork)
ZIP containing all full-resolution images:
discovered via base-name pattern matching

C. Multi-Image Download (Collection)
ZIP with folder structure:
CollectionName/
   Artwork1/
      image1.jpg
      image2.jpg
   Artwork2/
      …
. Single Artwork PDF
Includes:
Full image
Caption
Category
Series
Inventory number
Edition Number
Edition Price

E. Collection PDF Export
One page per artwork with:
Full image
Caption
Category
Series
Inventory
Edition Number
Edition Price


6.7.2 Image Source Logic
Thumbnails:

/artworks/small/*.jpg
Full images:

/artworks/*.jpg
PDF + ZIP always use full images.

6.7.3 Error Handling
Missing image → placeholder.ZIP/PDF error → user alert.Large collections → background job with progress UI.

6.8 Guest View (Shared Collection Viewer)
Purpose
A clean, read-only public interface for collectors who receive a shared collection link.

6.8.1 Content Shown
For each artwork:
Large main image
Caption
Edition Number
Edition Price
(Optional) Category / Series

6.8.2 Restrictions
Guest View does NOT allow:
Downloads
Quick Collection
Hold
Edit
Search
Navigation
Viewing other collections

6.8.3 Token & Expiration
Secure 32-byte token in URL
Stored in FileMaker / WP transient
Link expiration: 7 days
After expiration:“This link has expired.”

6.8.4 Visual Style
Minimal white layout
Large images
Caption + edition/price below
No controls except scroll

6.8.5 Performance
Load thumbnails first
Replace with full images on scroll
Pre-cached collection data optional



7. System Architecture

The system consists of three coordinated layers:
WordPress Front-End + Custom Plugin
FileMaker Cloud (Data Layer)
WordPress Filesystem (Image Storage: full + thumbnails)

7.1 Architectural Overview
A. WordPress Front-End + Plugin
The WordPress plugin is the application engine. It handles:
UI generation (Search, Detail View, Collections, Quick Collection, Hold System, Guest View)
All communication with FileMaker (server-to-server API calls)
Loading images from the filesystem (full size + thumbnails in /small/)
Download operations (ZIPs, PDFs)
Quick Collection management (client-side only)
Session management
Guest View token generation and validation
The front-end is client-rendered and must be lightweight.

B. FileMaker Cloud
Acts as the source of truth for:
artworks (works_catalog)
caption
category / series / year / dimensions
edition number
edition price
inventory / internal IDs
availability
edition_catalog loan status
gallery users
collections data
hold records
optional: guest view tokens
Everything that is “data” comes from FileMaker.WordPress never stores permanent artwork data.

C. WordPress Filesystem
Stores all artwork images, in two parallel folders:
1. Full-resolution images

/wp-content/uploads/artworks/
2. Thumbnails (“small” folder)

/wp-content/uploads/artworks/small/
Same filenames for full + thumbnails
Thumbnail images are used for:
Search Grid
Collection View
Quick Collection
Guest View initial load
Full images are used for:
Artwork Detail View (after preview)
PDF export
ZIP export

7.2 Data Flow
7.2.1 Login
WordPress sends username + password to FileMaker
FileMaker returns gallery_id
WordPress stores session with:
gallery_id
gallery_name
session timestamp

7.2.2 Search
WP plugin sends field-specific filters to FileMaker:
title
year
category
series
materials
dimensions
price
FileMaker returns metadata (no images)
WP attaches:
thumbnail URLs (/small/)
Front-end renders results

7.2.3 Artwork Detail
WP requests work metadata via work_id
FM returns metadata
WP resolves:
All small images
All full-resolution imagesvia base-name pattern matching
Detail View shows small → then loads full

7.2.4 Quick Collection
Stored only in browser memory
No server interactions
Export to collections triggers API calls

7.2.5 Saved Collections
WP → FM create / update / remove
WP maps artworks to images on filesystem
WP builds PDFs, ZIPs

7.2.6 Holds
WP sends createHold and releaseHold to FM
FM determines hold validity
WP displays hold states

7.2.7 Guest View
WP plugin creates a secure token
Token stored in FM or WP (transient)
Guest loads link → WP validates token
WP loads collection data (from FM or cache)
WP loads /small/ thumbnails
On scroll → WP replaces with full images

7.3 FileMaker Responsibilities
FileMaker manages:
Authentication
Artwork metadata
Availability enforcement (Available for sale = yes)
Edition number & price
Loans (from edition_catalog)
Collections
Holds
Optional Guest View token storage
FileMaker does not manage:
images
PDFs
ZIPs

7.4 WordPress Plugin Responsibilities
Handles:
All UI rendering
Local caching
API calls to FM
Image lookup logic
PDF / ZIP generation
Quick Collection state
Token generation for Guest View
Hold button logic

7.5 Image Resolution Logic

7.5.1 Filenames
FileMaker stores only:

image_location = "2015_Salt Bride.jpg"
7.5.2 Base Name Logic
WP extracts:

"2015_Salt Bride"
7.5.3 WP scans TWO folders:

/artworks/
/artworks/small/
Matches every file:
Starting with that base name
Ending with .jpg / .jpeg
Creates two arrays:

images_small[]
images_full[]
Used throughout the system.

7.6 System Integration Summary
WordPress drives UI + exports
FileMaker drives data + logic
Images stored in WordPress
All heavy lifting stays off FileMaker
Guest View entirely served by WP

7.7 Session Management
WordPress session
12 hours expiration
5 failed attempts → 15 min lockout
Cookies: HttpOnly, Secure, SameSite=Lax

7.8 Performance Goals
(Expanded in Section 9)
8. Security Requirements

This section ensures data protection, secure communication, controlled access, and safe shared links.

8.1 Authentication & Sessions
8.1.1 Credentials
Stored only in FileMaker
Passwords hashed
No WP users created
8.1.2 Login Protection
Max 5 failed attempts
Lockout: 15 minutes
Generic error messages
8.1.3 Session Cookies
HttpOnly
Secure
SameSite=Lax

8.2 Authorization
Galleries see only their own collections, holds, and guest links
All API calls validated against gallery_id
No bypass allowed through the front-end

8.3 FileMaker API Security
All requests must use FM Data API tokens
Tokens never exposed to browser
WordPress plugin acts as secure proxy

8.4 Data Protection
8.4.1 Mandatory Availability Filter
FM must enforce:

Available for sale = "yes"
Nothing else may bypass this.
8.4.2 Sensitive Data
Only metadata needed for the UI is returned
Edition catalog queries return only availability / loan info

8.5 Guest View Security
8.5.1 Token
32-byte secure random token
Stored with expiration (7 days)
8.5.2 No Downloads
Guest View blocks:
ZIPs
PDFs
Right-click save (optional soft block)
8.5.3 Read-Only
No search
No navigation
No edit
No holds
No Quick Collection

8.6 Export Security
All PDF/ZIP operations server-side
Sanitization of filenames
Temporary files auto-deleted
Never expose server paths

8.7 Protection Against Attacks
SQL/API injection blocked
Input sanitization everywhere
XSS protection (escape captions & text)
CSRF tokens for collection/hold actions
X-Frame-Options: DENY
Strict HTTPS

8.8 Image Handling Security
Only JPEG accepted
Filenames sanitized
Path traversal blocked
Missing images replaced with placeholder

8.9 Server Security
Hardened WP instance
FM Cloud behind secure endpoint
Backups daily (FM + WP uploads)

9. Performance & Caching


A fast and efficient platform is essential.This section defines all performance requirements.

9.1 Image Performance
9.1.1 Two-Tier Image Architecture
Thumbnails → /artworks/small/
Full images → /artworks/
Grid View
Uses thumbnails only.
Artwork Detail
Loads thumbnail first → then full image.
Guest View
Loads thumbnails → replaces with full on scroll.
Exports
Uses full images only.

9.2 Search Performance
9.2.1 Field-Specific Search
No global text search
Faster FM performance
Minimal result payload
9.2.2 Pagination / Infinite Scroll
Return 25–50 artworks per batch
9.2.3 Cached Thumbnails
WP caches thumbnail URLs for faster re-rendering

9.3 FileMaker Load Balancing
9.3.1 Minimize API Hits
Batch fetch collection items
Reuse metadata in front-end memory
Cache FM results in WP for 30–60 minutes
9.3.2 No Images in FM
All images stored in WordPress only→ significant performance gain

9.4 WordPress Performance
9.4.1 Base-Name Cache
WP caches results of filesystem scans:
base-name → {small_images[], full_images[]}
Prevent repeated scans
9.4.2 Asynchronous Exports
Large ZIP/PDF generation performed async if needed.
9.4.3 Preload Next Image
Artwork Detail should preload next image in strip.

9.5 Quick Collection
Local/session storage
Zero server calls
Instant UI updates
No lag

9.6 Collections
Batch Operations
Add all artworks in one request
Reorder sends only final SortOrder array
Efficient Rendering
Only modified cards re-rendered
Virtual scrolling for large collections

9.7 Guest View Performance
Lightweight page; no heavy scripts
Data optionally cached at link creation
Thumbnail-first loading
Full images loaded lazily

9.8 Performance Targets
Search Results: < 500ms (cached), < 1.2s fresh
Detail View load: < 800ms
Collections load: < 1s
Guest View: < 700ms
ZIP small: < 2s; large: < 10s
PDF: 3–5s


10. Error Handling & Edge Cases

This section defines how the system should behave in all failure scenarios, unexpected states, and boundary conditions, ensuring the application is resilient, predictable, and user-friendly even when errors occur.

10.1 General Error Handling Principles
Errors must never reveal internal system details (FileMaker queries, paths, exceptions).
Error messages must be short, human-readable, and consistent across the application.
Failures must not break the UI — always provide a safe fallback.
User actions should be optimistic (UI updates immediately) and then validated in the background.
If an action fails after optimistic update, the UI must revert with a clear message.

10.2 API Communication Errors (WordPress ↔ FileMaker)
10.2.1 Timeouts
If FileMaker API takes too long:
User message:
"Connection timeout. Please try again."
System must retry once, then fail gracefully.
10.2.2 Authentication Token Errors
If FM token is invalid/expired:
WordPress must automatically refresh the token.
User never sees a token error.
If refresh fails:
User message:
"Session expired. Please log in again."
User is returned to the Login screen.
10.2.3 Data Not Found
If FM returns missing or deleted artwork:
User message:
"This artwork is no longer available."
Artwork card shows placeholder image + disabled actions.
10.2.4 Corrupt or unexpected data
If FileMaker returns malformed data:
WP logs the issue
UI uses fallback defaults
System avoids render crashes

10.3 Search Errors
10.3.1 No Results
If no artworks match search criteria:
Display empty-state with message:
"No artworks found for your search."
Provide a button:Clear search filters
10.3.2 Invalid Input
If user enters invalid data (e.g., non-numeric year):
Front-end sanitizes automatically.If still invalid:
"Please enter valid search values."
10.3.3 Very Large Result Sets
If the search returns too many results:
System automatically paginates
UI shows “Load more” or infinite scroll

10.4 Artwork Detail Errors
10.4.1 Missing Images
If full image missing:
Show placeholder
Show small version if available
Disable full-screen mode
User message:
"Image unavailable."
10.4.2 Missing Caption
Rare but possible:
"Caption unavailable."
System continues to show basic metadata.
10.4.3 Failed Hold Fetch
If hold status cannot load:
"Unable to load hold status."
Hold button shows “Try again”.

10.5 Quick Collection Edge Cases
10.5.1 LocalStorage Unavailable
Some browsers (incognito, strict privacy) may block localStorage.
Fallback:
In-memory array
Clears when page reloads
User sees:
"Your selections will not be saved after closing the page."
10.5.2 Artwork Removed Mid-Session
If artwork disappears from FM:
It is automatically removed from Quick Collection
User notified silently (non-blocking toast)

10.6 Collections Errors
10.6.1 Failed to Create Collection
"Unable to create collection. Please try again."
If failure due to duplicate name:
"A collection with this name already exists."
10.6.2 Failed to Add Items
When adding from Quick Collection:
"Some artworks could not be added."
Duplicates quietly ignored.
10.6.3 Failed Reorder
If SortOrder save fails:
UI must revert to previous ordering:
"Unable to update ordering. Please try again."
10.6.4 Empty Collection
Empty-state with button:
“Add from Quick Collection”

10.7 Hold System Errors
10.7.1 Hold Conflict
If another gallery places a hold seconds before this user:
"This artwork was just placed on hold by another gallery."
UI immediately updates to the new hold state.
10.7.2 Hold Expired During Session
If viewing a held artwork whose hold just expired:
UI silently refreshes
Button becomes “Place Hold (30 days)”
10.7.3 Failed Hold Creation
"Unable to place hold. Please try again."
No partial hold is created.
10.7.4 Failed Hold Release
"Unable to release hold. Please try again."

10.8 Export Errors (PDF & ZIP)
10.8.1 Missing Image During Export
PDF/ZIP continues but inserts placeholder.
Silent log stored in WP.
10.8.2 ZIP Creation Failure
"Download failed. Please try again."
10.8.3 PDF Generation Error
"Could not generate PDF at this time."
Retry suggested.
10.8.4 Large Exports
If export takes too long:
Show spinner
Allow user to continue browsing
Auto-start download when ready

10.9 Guest View Errors
10.9.1 Token Expired
"This link has expired."
No further details revealed.
10.9.2 Token Not Found
"Invalid link."
10.9.3 Artwork Missing in Guest View
Show placeholder image
Still show caption and edition/price
10.9.4 Rate Limiting
Guest View endpoints must throttle heavy requests.

10.10 Image Handling Edge Cases
10.10.1 Thumbnail Exists But Full Image Missing
Use thumbnail as fallback.
10.10.2 Full Exists But Thumbnail Missing
WP auto-generates a temporary thumbnail on the fly.
10.10.3 Corrupt JPEG
"Unable to load image."
Fallback to placeholder.

10.11 Network & Browser Errors
Slow Network
All images lazy-load
Show responsive skeleton loaders
Offline Mode
Grid shows cached thumbnails only
FM data cannot load →
"Connection lost. Reconnecting…"
Browser Scaling / Retina
Use srcset for small vs full images

10.12 Fatal Errors (Extreme Edge Cases)
If an unexpected critical failure occurs:
UI reverts to safe minimal mode
User redirected to Search page
Message displayed:
"Something went wrong. Please try again."
System never exposes:
Stack traces
API details
SQL/FM schema
File paths
11. Admin Workflow (Studio Internal Workflow)


This section describes the internal workflow used by Sigalit Landau Studio to maintain the system, using FileMaker as the primary administration environment.All administrative operations are performed inside FileMaker — not in WordPress.
This ensures that FileMaker remains the single source of truth for all artwork, edition, gallery, and permissions data.

11.1 Overview of Admin Responsibilities
The studio administration team manages:
Artworks (metadata + captions)
Images (full + small thumbnails, stored in WordPress folder)
Editions (edition_catalog)
Galleries (administering gallery personnel access)
Collections (studio can view and edit if needed)
Hold Records (monitoring, cleaning expired holds)
Guest View Tokens (optional: stored in FM for auditing)

11.2 Artwork Management (FileMaker)
All artwork data is maintained exclusively in FileMaker in works_catalog.
Admin Workflow
Create / update artwork records
Fill out:
work_name
creation_year
category / series
materials
dimensions (height, width, length)
caption (formatted full text for UI)
inventory numbers
edition number (when relevant)
edition price
availability flags
Upload artwork images to WordPress manually (see 11.5)
Important
Every artwork MUST have:
A correct caption (used everywhere in UI and PDFs)
A correct image_location (only the first filename)

11.3 Edition Management
Managed inside edition_catalog.
Admin Can:
Add new editions
Update edition availability
Update prices
Update loan status:
If work is loaned to a gallery
Loan start / end
Loan notes
Loan Data Impact on UI:
Search filter “Loaned to my gallery”
Display “On Loan” tag in Detail View
Exclusion/inclusion logic for galleries

11.4 Gallery User Management
All gallery personnel accounts exist only in FileMaker.
Fields managed by admin:
Username
Password (hashing recommended)
Gallery Name
Gallery ID
Contact info (optional)
Admin can:
Create a new gallery user
Change password
Disable user
Delete user
Admin cannot (by design):
Change anything in WordPress
See Quick Collections (client-side only)
See private browser states

11.5 Image Upload Workflow (Very Important)
Images are managed manually in WordPress filesystem.
Each artwork requires:
Full-resolution images stored in:/wp-content/uploads/artworks/

Thumbnails stored in:/wp-content/uploads/artworks/small/
Filenames MUST match exactly between the two folders.
Filename Rules:
Format: YEAR_Title variant.jpg
Only .jpg or .jpeg
No spaces inside year prefix
Avoid special characters
Admin Workflow:
Export images from photography/studio system
Resize manually for small version (recommended width: 400px)
Upload to the correct folders
Set the primary filename in FileMaker (image_location)

11.6 Collections (Studio-Level Monitoring)
Collections created by galleries are stored in:
Gallery_Collections
Gallery_Collection_Items
Admin Can:
View all collections
Audit what galleries are selecting
Remove problematic items
Manually edit collection names
Delete collections if needed
Admin Should Not:
Create collections for galleries
Change gallery content arbitrarily

11.7 Holds Management
All holds created by galleries are stored in a dedicated table or as fields inside edition_catalog.
Admin Can:
View all active holds
Force-release a hold
Manually remove incorrect records
Audit galleries who hold works too often
Automatic Expiration
FM script or WP cron clears expired holds daily
Admins should periodically confirm expiration success

11.8 Guest View Token Management
Depending on implementation (FM or WP):
If stored in FileMaker (recommended):
Admin can view all generated tokens
See which gallery shared what
View expiration dates
Clean expired tokens if needed
If stored in WordPress transient:
Admin only sees:
Basic guest view logs (in FM)
No direct token access

11.9 Updating System Rules
Admin can update:
Categories
Series names
Default prices
Material taxonomies
Dimension conventions
Note fields
These changes immediately affect WordPress results.

11.10 Maintenance Recommended Practices
Monthly:
Clean expired guest tokens
Check hold expiration behavior
Ensure thumbnails and full images match
Check for missing or mismatched filenames in FM
Quarterly:
Review gallery accounts
Clean old/deleted collections
Audit artwork availability flags
During New Artwork Uploads:
Verify caption formatting
Verify image filenames match
Upload both sizes
Check Detail View display

11.11 Admin Constraints
Admin cannot:
Trigger WordPress–FileMaker schema changes automatically
See private gallery session data
Modify Quick Collections
Generate WordPress PDFs manually (system-driven)
Admin should:
Maintain data integrity
Ensure artworks have complete metadata
Keep filenames consistent
Ensure no missing small/full variants


12. Glossary

This glossary defines all terminology used throughout the specification.Each term is written exactly as it is used in the system.

12.1 Artwork & Metadata Terms
Artwork
A record in works_catalog representing a single work by the artist.Includes caption, category, series, year, materials, dimensions, edition information, and image filename.
Caption
A single preformatted text field in FileMaker containing:
Work name
Year
Materials
DimensionsCaption is the main descriptive text used everywhere in the interface, PDFs, and Guest View.
Category
A high-level classification of the artwork (e.g., Sculpture, Video, Installation).
Series
A grouping for thematically related artworks. Used in filtering and display.
Edition Number
The specific edition number of the artwork (e.g., 2/6).Displayed in:
Artwork Detail
Collections
Guest View
PDFs
Edition Price / Current Edition Price
The price of the edition, pulled from edition_catalog or works_catalog.Shown in:
Artwork Detail
Collections
Guest View
PDFs

12.2 Image System Terms
Full-Resolution Images
High-quality artwork images stored in:

/wp-content/uploads/artworks/
Used in:
Artwork Detail (after preview)
PDF exports
ZIP downloads
Fullscreen viewer
Thumbnail Images (“small” folder)
Low-resolution versions stored in:

/wp-content/uploads/artworks/small/
Used in:
Search Grid
Collections
Quick Collection
Guest View initial load
Base Name
Filename without extension, used to locate all images of a work.Example:2015_Salt Bride
Image Discovery
Process where WP plugin finds all files with matching base name in both folders (full + small).

12.3 Collection Terms
Quick Collection
A temporary session-based list of artworks selected by the gallery.Stored in localStorage only.Used to create or update Saved Collections.
Saved Collection
A persistent gallery-curated set of artworks stored in FileMaker:
Gallery_Collections
Gallery_Collection_ItemsIncludes SortOrder for layout consistency.
SortOrder
Numeric value controlling the order of artworks inside a Saved Collection.Updated after drag-and-drop rearrangement.

12.4 Hold System Terms
Hold
A temporary reservation of an artwork for 30 days by a gallery.Stored in a FileMaker table.
Hold Start / Hold End
Timestamps defining when a hold begins and when it expires.
Active Hold
A hold record that is still valid (not expired and not released).
Hold Conflict
Occurs when another gallery places a hold on an artwork just before the current user attempts to.

12.5 User & Access Terms
Gallery Personnel
The authenticated user representing a gallery.Each gallery has one shared login.
Guest View
A public, read-only share page accessed through a time-limited tokenized link.Shows:
Image
Caption
Edition Number
Edition PriceNo downloads or interactivity.
Guest View Token
Secure 32-byte random string used to provide temporary access to a shared collection.

12.6 FileMaker / API Terms
FileMaker Data API
REST-based API used by WordPress to access and modify FileMaker data.
FileMaker Token
Session token required for API access.Managed internally by the WP plugin.
gallery_id
The identifier linking a logged-in gallery to:
Collections
Holds
Permissions
Saved selections
work_id
Unique identifier of an artwork in FileMaker.
collection_id
Identifier for a Saved Collection.
item_id
Identifier for an item inside a collection linking the collection and work.

12.7 Export Terms
PDF Export
Multi-page document generated from:
Caption
Images
Edition info
Metadata
Different formats for:
Single Artwork
Whole Collection
ZIP Export
A compressed archive containing:
One folder per artwork
All full-resolution images
Used for gallery presentations and internal work.

12.8 Error Handling Terms
Safe Fallback
A UI behavior ensuring that the app never “breaks” visually; missing data gets placeholders.
Optimistic UI
The interface updates instantly before server confirmation.
Silent Removal
Automatic removal of missing/unavailable artworks from Quick Collection or Collections without blocking the user.

12.9 Performance Terms
Lazy Loading
Images load only when visible on screen.
Thumbnail-First Strategy
UI loads small images first, replacing with full-resolution images when needed.
Pagination / Infinite Scroll
Search results load in batches (25–50 items).
Base-Name Cache
WP caching mechanism reducing repeated filesystem scans.
